[ì›ë³¸ ë§í¬](https://velog.io/@juijeong8324/Design-Pattern-5)

> ğŸ’» **[ê°ì‹œì íŒ¨í„´ êµ¬í˜„ ì½”ë“œ](https://github.com/juijeong8324/design-pattern-study/tree/main/02_observer_pattern/UiJeong)** 

<br>

## ê°ì‹œì íŒ¨í„´ 
> "ê°ì²´ ì‚¬ì´ì— _**ì¼ ëŒ€ ë‹¤ì˜ ì˜ì¡´ ê´€ê³„ë¥¼ ì •ì˜**_í•´ ë‘ì–´, ì–´ë–¤ _**ê°ì²´ì˜ ìƒíƒœê°€ ë³€í•  ë•Œ**_ ê·¸ ê°ì²´ì— _**ì˜ì¡´ì„±ì„ ê°€ì§„ ë‹¤ë¥¸ ê°ì²´ë“¤ì´ ê·¸ ë³€í™”ë¥¼ í†µì§€ë°›ê³  ìë™ìœ¼ë¡œ ê°±ì‹ **_ë  ìˆ˜ ìˆê²Œ ë§Œë“­ë‹ˆë‹¤." 
-Gang Of Four- 

<p>
<img src="https://velog.velcdn.com/images/juijeong8324/post/d91cc936-99b3-4321-9634-89415a0b47cf/image.png" width=300 />
</p>

- **_ê°ì²´(Subject)_**ì˜ ìƒíƒœ ë³€í™”ë¥¼ ê´€ì°°í•˜ë‹¤ê°€, _**ìƒíƒœ ë³€í™”ê°€ ìˆì„ ë•Œ**_ë§ˆë‹¤ ì˜µì €ë²„(Observer) ëª©ë¡ì— ìˆëŠ” _**ì˜µì €ë²„ë“¤(Observers)**_ì—ê²Œ ë©”ì„œë“œ ë“±ì„ í†µí•´ _**ë³€í™”ë¥¼ ì•Œë ¤ì£¼ëŠ”**_ ë””ìì¸ íŒ¨í„´, ì´ë•Œ ë³€í™”ëŠ” _**ìë™ìœ¼ë¡œ**_ ê°±ì‹ 

<p>
<img src="https://velog.velcdn.com/images/juijeong8324/post/1d642419-c979-4ff1-a948-a47db01b9593/image.png" width=600 />
</p>

- _**MVC(Model, View, Controller) íŒ¨í„´**_ì—ë„ ì‚¬ìš©	

> **ğŸ¤” ì–´ë–»ê²Œ ì‚¬ìš©ë˜ë‚˜ìš”?** 
- ì˜µì €ë²„ íŒ¨í„´ì€ _**MVCì—ì„œ ëª¨ë¸ê³¼ ë·° ì‚¬ì´ë¥¼ ëŠìŠ¨íˆ ì—°ê²°**_í•˜ê¸° ìœ„í•´ ì‚¬ìš©
- _**Model**_(í‘œì‹œ í˜•ì‹ì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ” ë‚´ë¶€ ëª¨ë¸ì„ ì¡°ì‘) â†” _**Subject**_  
  _**View**_(Modelì´ ì–´ë–»ê²Œ ë³´ì¼ ê²ƒì¸ì§€ë¥¼ ê´€ë¦¬) â†” _**Observer**_ 
  â†’ í•˜ë‚˜ì˜ Modelì— ë³µìˆ˜ì˜ Viewê°€ ëŒ€ì‘ 
- ì£¼ì²´ì¸ _**ëª¨ë¸(model)ì—ì„œ ì¼ì–´ë‚˜ëŠ” ì´ë²¤íŠ¸**_ë¥¼ _**update() ë©”ì„œë“œ**_ë¡œ _**ì˜µì €ë²„ì¸ ë·°**_ì— ì•Œë ¤ì£¼ê³  ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ _**ì»¨íŠ¸ë¡¤ëŸ¬ ë“±ì´ ì‘ë™**_

- [ë°œí–‰/êµ¬ë… ëª¨ë¸](https://ko.wikipedia.org/wiki/%EB%B0%9C%ED%96%89-%EA%B5%AC%EB%8F%85_%EB%AA%A8%EB%8D%B8)ë¡œ ì•Œë ¤ì ¸ ìˆë‹¤. 
- GoF ë””ìì¸ íŒ¨í„´ ì¤‘ _**í–‰ìœ„ íŒ¨í„´**_ì— í•´ë‹¹ 


> **ğŸ¤”ì–¸ì œ ì‚¬ìš©í•˜ë‚˜ìš”?** 
1. _**ì–´ë–¤ ê°ì²´ì˜ ë³€í™”**_ë¡œ ì¸í•´ _**ë‹¤ë¥¸ ê°ì²´ê°€ ë³€ê²½**_ë˜ì–´ì•¼ í•˜ëŠ”ë°, í”„ë¡œê·¸ë˜ë¨¸ë“¤ì€ _**ì–¼ë§ˆë‚˜ ë§ì€ ê°ì²´ë“¤ì´ ë³€ê²½ë˜ì–´ì•¼ í•˜ëŠ”ì§€ ëª°ë¼ë„**_ ë  ë•Œ 
2. _**ì™¸ë¶€ì—ì„œ ë°œìƒí•œ ì´ë²¤íŠ¸**_ì— ëŒ€í•´ ê²°ê³¼ë¥¼ ì²˜ë¦¬í•´ì•¼ í•  ë•Œ 
3. _**ì´ë²¤íŠ¸ ê¸°ë°˜ ì‹œìŠ¤í…œ**_, _**ë¶„ì‚° ì´ë²¤íŠ¸ í•¸ë“¤ë§ ì‹œìŠ¤í…œ**_ì— ì£¼ë¡œ ì‚¬ìš© <br>
EX) íŠ¸ìœ„í„°
![](https://velog.velcdn.com/images/juijeong8324/post/c9514e5f-01b5-4520-b494-82798dabe7a0/image.png) ì–´ë–¤ ì£¼ì²´ë¥¼ 'íŒ”ë¡œìš°'í–ˆë‹¤ë©´ _**ì£¼ì²´ê°€ í¬ìŠ¤íŒ…ì„ ì˜¬ë¦´ ë•Œ(Subjectì˜ ìƒíƒœë³€í™” ì‹œ)**_ ì•Œë¦¼ì´ _**íŒ”ë¡œì›Œ(Observers)**_ì—ê²Œ ê°€ì•¼í•¨!! 


<br>
<br>

### êµ¬ì¡°
![](https://velog.velcdn.com/images/juijeong8324/post/ad3c0a00-4be4-4e5f-9b7c-a10afdcf9332/image.png)



![](https://velog.velcdn.com/images/juijeong8324/post/a599ef76-6c66-412e-9d20-7fa84278af3a/image.png)
- **Subject(ì¸í„°í˜ì´ìŠ¤)** 
: ê´€ì°°ë˜ëŠ” ëŒ€ìƒ, ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¤ëŠ” ì£¼ì²´
: Observerë¥¼ **ë“±ë¡```register() or attach()```**í•˜ê³  **ì‚­ì œ```unregister() or deattach()```**_í•˜ëŠ” ë©”ì†Œë“œë¥¼ ê°€ì§€ê³  ìˆìŒ 
: Subjectì—ì„œ ëª¨ë“  Observerì— ì •ë³´ë¥¼ ì „ë‹¬í•˜ëŠ” **```notify```** ë©”ì†Œë“œë¥¼ ê°€ì§€ê³  ìˆìŒ 
: SubjectëŠ” _**Observerë“¤ì„ ì•Œê³  ìˆëŠ” ê°ì²´**_ë¡œ ì—¬ëŸ¬ Observerê°€ Subjectì— ë¶™ì„ ìˆ˜ ìˆìŒ

- **ConcreteSubject(Subject1)** 
: êµ¬ì²´ì ìœ¼ë¡œ ê´€ì°°ë˜ëŠ” ëŒ€ìƒ
: ConcreteObserverì—ê²Œ _**ì•Œë ¤ì¤˜ì•¼ í•˜ëŠ” ìƒíƒœë¥¼ ì €ì¥**_í•´ì•¼ í•¨!
: ìƒíƒœê°€ ë³€í™”í•˜ë©´ _**ConcreteObserverë“¤ì—ê²Œ ```notify()```**_í•œë‹¤. notifyí•˜ê²Œ ë˜ë©´ ë£¨í”„ë¥¼ ëŒë©´ì„œ ê° Observerë¥¼ Updateí•œë‹¤.

- **Observer(ì¸í„°í˜ì´ìŠ¤)** 
: ê°ì²´(Subject)ë¡œ ë¶€í„° ìƒíƒœ ë³€í™”ë¥¼ ì „ë‹¬ ë°›ëŠ” ì—­í• 
: _**```update()```**_ë¥¼ í†µí•´ _**ìƒíƒœ ë³€í™”ë¥¼ ì „ë‹¬**_ë°›ëŠ”ë‹¤. 
â†’ ìŠ¤ìŠ¤ë¡œ ê°ì‹œí•˜ë‹¤ê°€ ë³€í™”ë¥¼ ì•Œì•„ì°¨ë¦¬ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, _**ë³€í™”ë¥¼ í†µì§€ë°›ê³  ë³€í™”ë¥¼ ì•Œê²Œ ë˜ëŠ” ê²ƒ!**_

- **ConcreteObserver(Observer1)** 
: êµ¬ì²´ì ì¸ Observer
: _**```update()```ê°€ í˜¸ì¶œë˜ë©´ ë©”ì†Œë“œ ì•ˆì—ì„œ Subjectì˜ í˜„ì¬ ìƒíƒœ ì·¨ë“í•˜ê³  ì²˜ë¦¬**_ 

<br>

> **â— ëŠìŠ¨í•œ ê²°í•©**
- Subjectì™€ Observerê°€ ëŠìŠ¨í•œ ê²°í•©ì„ ê°–ëŠ” ê²ƒì´ ì¤‘ìš”,
: Observer ë“±ë¡ ìˆœì„œ ë“±ì— _**íŠ¹ì • ë¡œì§ì´ ì˜ì¡´í•˜ì§€ ì•Šë„ë¡ í•œë‹¤.**_
- ì•„ë˜ í—¤ë“œí¼ìŠ¤íŠ¸ ì˜ˆì œ ì°¸ê³ ! 

> **â—ì˜µì €ë²„ëŠ” ìƒíƒœë¥¼ ê°–ì§€ ì•Šì•„ë„ ëœë‹¤**
- ìƒíƒœëŠ” Subjectì˜ ë‹´ë‹¹ì´ê³  getState()ë¡œ ìƒíƒœë¥¼ ì·¨ë“í•˜ë©´ ë¨!!

> **â— Notifyë¥¼ ëˆ„ê°€ í˜¸ì¶œí•´ì•¼ í• ê¹Œ?**
1. Subject ì—ì„œ ë³€ê²½ì´ ë°œìƒí•  ë•Œ, _**ë³€ê²½ì„ ì €ì¥í•˜ëŠ” ë©”ì†Œë“œê°€ Notify()ë¥¼ í˜¸ì¶œ**_í•˜ëŠ” ë°©ë²•. (ex. ì•„ë˜ ì½”ë“œì—ì„œ **```postmessage()```**)
2. _**ì‚¬ìš©ì(main ë“±)**_ê°€ _**ì ì ˆí•œ ì‹œê¸°ì— Notify()ë¥¼ í˜¸ì¶œ**_í•˜ëŠ” ë°©ë²•. <br>
**cf) ì°¸ê³ **
Observerë¥¼ attach í•  ë•Œ ê´€ì‹¬ì‚¬ë¥¼ í•¨ê»˜ ë“±ë¡í•˜ëŠ” ë°©ë²•ë„ ìˆë‹¤. ì´ ë°©ë²•ì„ ì‚¬ìš©í•´ êµ¬í˜„í•˜ë©´ _**Observer ë§ˆë‹¤ ë‹¤ë¥¸ ì •ë³´ë¥¼ ì „ë‹¬**_í•´ ì£¼ë„ë¡ í•  ìˆ˜ ìˆë‹¤.
```void Subject::Attach(Observer*, Aspect& interest);```

> â—**Update ë©”ì†Œë“œì˜ ì¸ì**
- ``void update(Subject theChangedSubject)``
â†’ GoFì˜ ì˜ˆì œì— ë“±ì¥í•˜ëŠ” Update ë©”ì†Œë“œë¡œ, Subjectë¥¼ ë„˜ê²¨ì£¼ê³ , ì˜µì €ë²„ê°€ ë„˜ê²¨ë°›ì€ Subjectì—ì„œ í•„ìš”í•œ ê°’ì„ ì–»ëŠ” ë°©ë²•
- ë°˜ë“œì‹œ ì§€ì¼œì•¼ í•˜ëŠ” ì•½ì†ì€ ì•„ë‹˜
â†’ ìƒí™©ì— ë”°ë¼ ë‹¤ë¥¸ ì¸ìë¥¼ í•¨ê»˜ ë„˜ê¸°ëŠ” ë°©ë²• 
`void update(Subject theChangedSubject, int changedCount)`
â†’ ë‹¨ìˆœíˆ ê°’ì„ ì „ë‹¬
`void update(int value1, int value2)`

> â—**Observerì˜ í–‰ìœ„ê°€ Subjectì— ì˜í–¥ì„ ì£¼ëŠ” ê²½ìš°**
- ì¼ë°˜ì ì¸ Observer íŒ¨í„´ì—ì„œ Subject ì—­í• ì´ ë‹¤ë¥¸ í´ë˜ìŠ¤ë¡œë¶€í„° update ë©”ì†Œë“œì˜ í˜¸ì¶œì„ ìš”ì²­ë°›ëŠ” ê²½ìš°ê°€ ì¡´ì¬
EX) GUIì—ì„œ ì‚¬ìš©ìê°€ ë²„íŠ¼ì„ ëˆŒëŸ¬ ìš”ì²­í•˜ë©´ update ë©”ì†Œë“œê°€ í˜¸ì¶œë˜ëŠ” ê²½ìš°! 
- Subjectê°€ update ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•  ë•Œ _**Observerê°€ Subjectì˜ ë©”ì†Œë“œë¥¼ í˜¸ì¶œì„ ìš”ì²­í•˜ëŠ” ê²½ìš°**_ê°€ ìˆëŠ”ë° ì´ ê²½ìš° _**ë¬´í•œ ë£¨í”„ê°€ ë°œìƒ**_í•  ìˆ˜ ìˆìŒ 
` Subjectì˜ ìƒíƒœê°€ ë³€í™” â†’ Subjectê°€ notifyë¥¼ í˜¸ì¶œ â†’ Observerì˜ updateê°€ í˜¸ì¶œ â†’ Observer::update ì‹¤í–‰ë„ì¤‘ Subjectì˜ ë©”ì†Œë“œ í˜¸ì¶œ â†’ Subjectì˜ ìƒíƒœê°€ ë³€í™”(ë°˜ë³µ)` 
- _**Observerì— í”Œë˜ê·¸ ë³€ìˆ˜ë¥¼ í•˜ë‚˜ ì¶”ê°€**_í•˜ì—¬ Observerê°€ í˜„ì¬ update ì¤‘ì¸ì§€ ì•„ë‹Œì§€(subjectë¡œ ë¶€í„° ì „ë‹¬ë°›ê³  ìˆëŠ” ì¤‘ì¸ì§€ ì•„ë‹Œì§€) ìƒíƒœë¥¼ ê¸°ë¡í•˜ì—¬ í•´ê²° 
```java
// ê¸°ê³„ì¸ê°„ë‹˜ì˜ ì˜ˆì‹œ ì½”ë“œ 
boolean isUpdate;
@Override
public void update(Subject s) {
    if (!isUpdate) {
        return;
    }
    this.subject = s;
}
```

<br>
<br>

### ì¥ì  
- _**Subjectì™€ Observer í´ë˜ìŠ¤ ì‚¬ì´ì—ëŠ” ì¶”ìƒì ì¸ ê²°í•©ë„ë§Œ ì¡´ì¬**_
- _**ë¸Œë¡œë“œìºìŠ¤íŠ¸ ë°©ì‹ì˜ êµë¥˜ ê°€ëŠ¥**_ : SubjectëŠ” ë³€í™” ë°œìƒ ì‹œ _**êµ¬ì²´ì ì¸ ìˆ˜ì‹ ìë¥¼ ì§€ì •í•  í•„ìš”ê°€ ì—†ë‹¤**_. ìƒíƒœê°€ ë³€í™”í–ˆë‹¤ëŠ” ì‚¬ì‹¤ë§Œ ì „ë‹¬í•˜ë©´ _**ë³€í™”ë¥¼ ì²˜ë¦¬í• ì§€ ë§ì§€ëŠ” Observerê°€ ê²°ì •**_

<br>

### ë‹¨ì 
- Observer íŒ¨í„´ì„ êµ¬í˜„í•  ë•Œ ë§ì€ í”„ë¡œê·¸ë˜ë¨¸ë“¤ì´ ìì£¼ ë¹ ì§€ëŠ” í•¨ì •ì€ í•­ìƒ ì±…ì˜ í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ê³¼ ë™ì¼í•œ êµ¬ì¡°ë¡œ êµ¬í˜„í•˜ë ¤ í•œë‹¤ëŠ” ê²ƒì´ë‹¤.

Observer íŒ¨í„´ì„ êµ¬í˜„í•  ë•Œ í”íˆ ìƒê¸°ëŠ” ë¬¸ì œì ì´ ë‘ ê°€ì§€ ìˆë‹¤. ê·¸ê²ƒì€ í†µë³´ ì²´ì¸ê³¼ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ë‹¤. í†µë³´ ì²´ì¸ì´ë€, í•œ ê´€ì°°ìê°€ í†µë³´ë¥¼ ë°›ì•˜ì„ ë•Œ ìì‹ ì´ ë‹¤ì‹œ ê·¸ ì£¼ì²´ê°€ ë˜ì–´ ë˜ ë‹¤ë¥¸ ê´€ì°°ìì—ê²Œ í†µë³´ë¥¼ í•˜ê³ , ê·¸ ê´€ì°°ìëŠ” ë˜ ë‹¤ë¥¸ ê´€ì°°ìì—ê²Œ í†µë³´í•˜ëŠ” ì‹ìœ¼ë¡œ ì—°ì†ì ì¸ í†µë³´ê°€ ë°œìƒí•˜ëŠ” ê²ƒì„ ë§í•œë‹¤. ì´ëŸ° ì‹ì˜ í†µë³´ ì²´ì¸ì´ ë¶ˆê°€í”¼í•œ ìƒí™©ì—ì„œ Observer íŒ¨í„´ì„ ì ìš©í•˜ë©´, ì„¤ê³„ê°€ ë³µì¡í•´ì§€ê³  ë””ë²„ê¹…ë„ ì–´ë ¤ì›Œì§„ë‹¤. ì´ëŸ´ ë•ŒëŠ” Mediator íŒ¨í„´ì„ ë„ì…í•˜ë©´ ë„ì›€ì´ ëœë‹¤. ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ëŠ” ê´€ì°°ì ê°ì²´ê°€ ì œë•Œì— ì“°ë ˆê¸° ìˆ˜ì§‘garbage collection ë˜ì§€ ì•ŠëŠ” í˜„ìƒìœ¼ë¡œ, í†µë³´ ì£¼ì²´ê°€ ê´€ì°°ì ê°ì²´ì˜ ì°¸ì¡°ë¥¼ ê°–ê³  ìˆê¸° ë•Œë¬¸ì— ë°œìƒí•œë‹¤. í†µë³´ ì£¼ì²´ê°€ ì´ê²ƒì„ ì œë•Œ ì‚­ì œí•´ì¤€ë‹¤ë©´, ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ë¥¼ í”¼í•  ìˆ˜ ìˆë‹¤.

ObserverëŠ” ìì£¼ ì‚¬ìš©ë˜ëŠ” íŒ¨í„´ì´ë‹¤. êµ¬í˜„í•˜ê¸°ë„ ì–´ë µì§€ ì•Šê¸° ë•Œë¬¸ì—, ì‹¤ì œë¡œ í•„ìš”í•˜ì§€ ì•Šì„ ë•Œì—ë„ ì´ íŒ¨í„´ì„ ì ìš©í•˜ê³  ì‹¶ì€ ìœ í˜¹ì— ë¹ ì§€ê¸°ë„ í•œë‹¤. ê·¸ ìœ í˜¹ì„ ê²¬ëŒë‚´ê¸° ë°”ë€ë‹¤. ì²˜ìŒì— í†µë³´ ê¸°ëŠ¥ì„ í•˜ë“œ ì½”ë”©ìœ¼ë¡œ êµ¬í˜„í–ˆë”ë¼ë„, ë‚˜ì¤‘ì— ì¼ë°˜í™”ê°€ í•„ìš”í•  ë•Œ ì–¸ì œë¼ë„ ë¦¬íŒ©í„°ë§ì„ í†µí•´ Observer íŒ¨í„´ì„ êµ¬í˜„í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤
<br>
<br>

## êµ¬í˜„
![](https://velog.velcdn.com/images/juijeong8324/post/7b46c5fd-ccb8-4202-9997-9ad8a5d6b6fc/image.png)


- **Observable**(Subject, ì¸í„°í˜ì´ìŠ¤ë‚˜ í´ë˜ìŠ¤ë¡œ êµ¬í˜„)
 âŒIntegerObservable(êµ¬ì²´ì ì¸ subject, ìƒì† or implements)
- **Observer**(Observer, ì¸í„°í˜ì´ìŠ¤ë‚˜ í´ë˜ìŠ¤ë¡œ êµ¬í˜„)
 âŒStarObserver(êµ¬ì²´ì ì¸ Observer, ìƒì† or implements)
 âŒCircleObserver(êµ¬ì²´ì ì¸ Observer)

> **ğŸ¤”ìë°”ì—ì„œ ìƒì† vs êµ¬í˜„?** 
- **ìƒì†**
: ìƒì†(extends)ì€ ìì‹ í´ë˜ìŠ¤ê°€ _**ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œ ë“±ì„ ìƒì†**_ë°›ì•„ ì‚¬ìš© 
: ìì‹ í´ë˜ìŠ¤ì—ì„œ _**ì¶”ê°€ ë° í™•ì¥**_ì„ í•  ìˆ˜ ìˆëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ì¬ì‚¬ìš©ì„±, ì¤‘ë³µì„±ì˜ ìµœì†Œí™”ê°€ ì´ë£¨ì–´ì§ <br>
- **êµ¬í˜„**
: êµ¬í˜„(implements)ì€ _**ë¶€ëª¨ ì¸í„°í˜ì´ìŠ¤(interface)ë¥¼ ìì‹ í´ë˜ìŠ¤ì—ì„œ ì¬ì •ì˜**_í•˜ì—¬ êµ¬í˜„<br>
- **ìƒì†ê³¼ êµ¬í˜„ì˜ ì°¨ì´**
: ìƒì†ì€ _**ì¼ë°˜ í´ë˜ìŠ¤, abstract í´ë˜ìŠ¤**_ë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„í•˜ë©°, êµ¬í˜„ì€ _**ì¸í„°í˜ì´ìŠ¤**_ë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„
: êµ¬í˜„ì€ ìƒì†ê³¼ëŠ” ë‹¬ë¦¬ _**ë°˜ë“œì‹œ ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œë¥¼ ì¬ì •ì˜**_í•˜ì—¬ êµ¬í˜„

<br>
<br>

## EXAMPLE
### JAVA
```java
import java.util.ArrayList;
import java.util.List;

/* Subject ì¸í„°í˜ì´ìŠ¤ */ 
interface Subject {
    public void register(Observer obj); // ì˜µì €ë²„ ë“±ë¡í•˜ëŠ” ë©”ì†Œë“œ 
    public void unregister(Observer obj); // ì˜µì €ë²„ ì‚­ì œí•˜ëŠ” ë©”ì†Œë“œ 
    public void notifyObservers(); // ì˜µì €ë²„ë“¤ì—ê²Œ ìƒíƒœ ë³€í™”ë¥¼ ì•Œë¦¬ëŠ” ë©”ì†Œë“œ 
    public Object getUpdate(Observer obj);
}

/* Observer ì¸í„°í˜ì´ìŠ¤ */
interface Observer {
    public void update(); 
}

/* êµ¬ì²´ì ì¸ Subject, ì£¼ì²´ */
class Topic implements Subject {
    private List<Observer> observers; // ì˜µì €ë²„ë“¤ì„ ì•Œê³  ìˆë‹¤. 
    private String message; 

	// ìƒì„±ì 
    public Topic() {
        this.observers = new ArrayList<>();
        this.message = "";
    }
	
    // ì˜µì €ë²„ ë“±ë¡ ë©”ì†Œë“œ 
    @Override
    public void register(Observer obj) {
        if (!observers.contains(obj)) observers.add(obj); 
    }

	//ì˜µì €ë²„ ì‚­ì œ ë©”ì†Œë“œ 
    @Override
    public void unregister(Observer obj) {
        observers.remove(obj); 
    }

	// ì˜µì €ë²„ì—ê²Œ ìƒíƒœ ë³€í™” ì•Œë¦¼ ë©”ì†Œë“œ -> ê° ì˜µì €ë²„ë“¤ì˜ update ë¬¸ì„ í˜¸ì¶œí•˜ê²Œ í•¨ 
    @Override
    public void notifyObservers() {   
        this.observers.forEach(Observer::update); 
    }

	// Topic(subject)ì˜ ì—…ë°ì´íŠ¸ ëœ ë©”ì„¸ì§€ë¥¼ ë°˜í™˜ 
    @Override
    public Object getUpdate(Observer obj) {
        return this.message;
    } 
    
    // ë©”ì„¸ì§€ ì‘ì„± ë©”ì†Œë“œ ì—¬ê¸°ì„œ ìƒíƒœë³€í™”(msgê°€ ì—…ë°ì´íŠ¸)ê°€ ì¼ì–´ë‚˜ë©´ notify ë©”ì†Œë“œë¥¼ í˜¸ì¶œ 
    public void postMessage(String msg) {
        System.out.println("Message sended to Topic: " + msg);
        this.message = msg; 
        notifyObservers();
    }
}

/* êµ¬ì²´ì ì¸ Observer */
class TopicSubscriber implements Observer {
    private String name;
    private Subject topic;

	// ìƒì„±ì
    public TopicSubscriber(String name, Subject topic) {
        this.name = name;
        this.topic = topic;
    }

	// update í•¨ìˆ˜ 
    @Override
    public void update() {
        String msg = (String) topic.getUpdate(this); // ìƒíƒœ ë³€í™”(ì—…ë°ì´íŠ¸)ëœ ë©”ì„¸ì§€ë¥¼ ì–»ìŒ 
        System.out.println(name + ":: got message >> " + msg); // ì²˜ë¦¬ 
    } 
}

/* Demo í´ë˜ìŠ¤ */
public class HelloWorld { 
    public static void main(String[] args) {
        Topic topic = new Topic(); 
        Observer a = new TopicSubscriber("a", topic);
        Observer b = new TopicSubscriber("b", topic);
        Observer c = new TopicSubscriber("c", topic);
        topic.register(a);
        topic.register(b);
        topic.register(c); 
   
        topic.postMessage("amumu is op champion!!"); 
    }
}
/*
Message sended to Topic: amumu is op champion!!
a:: got message >> amumu is op champion!!
b:: got message >> amumu is op champion!!
c:: got message >> amumu is op champion!!
*/ 

```
- Topicì€ ì£¼ì²´ì´ì ê°ì²´
- **```class Topic implements Subject```**ë¥¼ í†µí•´ _**Subject interface**_ë¥¼ êµ¬í˜„
- **```Observer a = new TopicSubscriber("a", topic);```**ìœ¼ë¡œ ì˜µì €ë²„ë¥¼ ì„ ì–¸í•  ë•Œ í•´ë‹¹ ì´ë¦„ê³¼ ì–´ë– í•œ í† í”½ì˜ ì˜µì €ë²„ê°€ ë  ê²ƒì¸ì§€ë¥¼ ì •í•¨! 
- Topicì—ì„œ **```postMessage()```**ë¡œ messageë¥¼ ì‘ì„± (message ìƒíƒœë³€í™” ë° ì—…ë°ì´íŠ¸) 
â†’ ì˜µì €ë²„ë“¤ì—ê²Œ **```notifyObservers()```**ë¡œ ì•Œë¦¼ (ì˜µì €ë²„ì˜ **```update()```** í˜¸ì¶œ) 
â†’ **```update()```**ì—ì„œ **```getUpdate()```**ë¡œ topicì˜ ì—…ë°ì´íŠ¸ ëœ ë©”ì„¸ì§€ë¥¼ ë°›ê³  ì²˜ë¦¬ 


<br>

### [í—¤ë“œ í¼ìŠ¤íŠ¸ ë””ìì¸ íŒ¨í„´ì˜ ì˜ˆì œ](https://johngrib.github.io/wiki/pattern/observer/#%ED%97%A4%EB%93%9C-%ED%8D%BC%EC%8A%A4%ED%8A%B8-%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4%EC%9D%98-%EC%98%88%EC%A0%9C) 
- _**update ë©”ì†Œë“œì˜ ì¸ìë¡œ Subjectê°€ ì•„ë‹ˆë¼ ê° ê°’ì„ ì „ë‹¬**_ -> ëŠìŠ¨í•œ ê²°í•©! 

<br>

1. Observer ì¸í„°í˜ì´ìŠ¤ 
```java
public interface Observer {
    public void update(float temp, float humidity, float pressure);
}
```

<br>

2. Subject ì¸í„°í˜ì´ìŠ¤ 
```java
public interface Subject {
    public void registerObserver(Observer o);
    public void removeObserver(Observer o);
    public void notifyObservers();
}
```

<br>

3. Subjectì˜ êµ¬í˜„ì²´
- ë³€ê²½ì´ ë°œìƒí•  ë•Œ, Subjectì—ì„œ **`nofity()`**ì„ í˜¸ì¶œí•œë‹¤.
```java
import java.util.ArrayList;

public class WeatherData implements Subject {
    private ArrayList<Observer> observers;
    private float temperature;
    private float humidity;
    private float pressure;

    public WeatherData() {
        this.observers = new ArrayList<>();
    }

    @Override
    public void registerObserver(Observer o) {
        observers.add(o);
    }

    @Override
    public void removeObserver(Observer o) {
        int i = observers.indexOf(o);
        if (i >= 0) {
            observers.remove(i);
        }
    }

    @Override
    public void notifyObservers() {
        for (Observer o : observers) {
            o.update(temperature, humidity, pressure);
        }
    }

    public void measurementsChanged() {
        notifyObservers();
    }

    public void setMeasurements(float temperature, float humidity, float pressure) {
        this.temperature = temperature;
        this.humidity = humidity;
        this.pressure = pressure;
        measurementsChanged();  // ë³€ê²½ì´ ë°œìƒí•  ë•Œ, ì•Œë¦¼ì„ ëŒë¦¬ëŠ” ë°©ë²• ì„ íƒ
    }
}
```

<br>

4. Observer êµ¬í˜„ì²´
- update í˜¸ì¶œì‹œ _**displayê°€ í˜¸ì¶œë˜ì–´ í™”ë©´ì´ ë°”ë€Œê²Œ í•¨ **_
- ìƒì„±ì íŒŒë¼ë¯¸í„°ë¡œ ë°›ì€ Subjectì— ìê¸° ìì‹ ì„ ë“±ë¡í•˜ê¸° ë•Œë¬¸ì— _**main ë©”ì†Œë“œì—ì„œ Subjectì— ì˜µì €ë²„ë¥¼ ì¼ì¼ì´ ë“±ë¡í•˜ì§€ ì•ŠìŒ!**_
```java
public class CurrentConditionsDisplay implements Observer, DisplayElement {
    private int id;
    private float temperature;
    private float humidity;
    private Subject weatherData;

    public CurrentConditionsDisplay(Subject weatherData, int id) {
        this.id = id;
        this.weatherData = weatherData;
        weatherData.registerObserver(this);
    }

    @Override
    public void update(float temp, float humidity, float pressure) {
        this.temperature = temp;
        this.humidity = humidity;
        display();  // í¸ì˜ìƒ ì—¬ê¸°ì— ë°°ì¹˜
    }

    @Override
    public void display() { // Displayelement ì¸í„°í˜ì´ìŠ¤ ë©”ì†Œë“œ êµ¬í˜„ 
        System.out.println("ì¥ë¹„ ID: " + id + ", í˜„ì¬ ê¸°ì˜¨: " + temperature + "ë„, ìŠµë„: " + humidity + "%");
    }
}
```

<br>

5. Main
```java
public static void main(String[] args) {

    WeatherData weather = new WeatherData();
    CurrentConditionsDisplay current1 = new CurrentConditionsDisplay(weather, 1);
    CurrentConditionsDisplay current2 = new CurrentConditionsDisplay(weather, 2);
    CurrentConditionsDisplay current3 = new CurrentConditionsDisplay(weather, 3);

    weather.setMeasurements(30,65, 30.4f);
    weather.setMeasurements(29,64, 30.5f);
    weather.setMeasurements(30,64, 30.6f);
}
```

<br>

```
ì¥ë¹„ ID: 1, í˜„ì¬ ê¸°ì˜¨: 30.0ë„, ìŠµë„: 65.0%
ì¥ë¹„ ID: 2, í˜„ì¬ ê¸°ì˜¨: 30.0ë„, ìŠµë„: 65.0%
ì¥ë¹„ ID: 3, í˜„ì¬ ê¸°ì˜¨: 30.0ë„, ìŠµë„: 65.0%
ì¥ë¹„ ID: 1, í˜„ì¬ ê¸°ì˜¨: 29.0ë„, ìŠµë„: 64.0%
ì¥ë¹„ ID: 2, í˜„ì¬ ê¸°ì˜¨: 29.0ë„, ìŠµë„: 64.0%
ì¥ë¹„ ID: 3, í˜„ì¬ ê¸°ì˜¨: 29.0ë„, ìŠµë„: 64.0%
ì¥ë¹„ ID: 1, í˜„ì¬ ê¸°ì˜¨: 30.0ë„, ìŠµë„: 64.0%
ì¥ë¹„ ID: 2, í˜„ì¬ ê¸°ì˜¨: 30.0ë„, ìŠµë„: 64.0%
ì¥ë¹„ ID: 3, í˜„ì¬ ê¸°ì˜¨: 30.0ë„, ìŠµë„: 64.0%
```

<br>

### Javascript
ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ í”„ë¡ì‹œ ê°ì²´ë¥¼ í†µí•´ Observer Patternì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.
```js
function createReactiveObject(target, callback) { 
    const proxy = new Proxy(target, {
        set(obj, prop, value){ // handler setí•¨ìˆ˜ : ì†ì„±ì— ëŒ€í•œ ì ‘ê·¼ì„ ê°€ë¡œì±”. 
            if(value !== obj[prop]){ // ìƒíƒœ ë³€í™”ë¥¼ ê°ì§€ 
                const prev = obj[prop]
                obj[prop] = value // ì†ì„± ê°’ ë°”ê¿ˆ 
                callback(`${prop}ê°€ [${prev}] >> [${value}] ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤`)
            }
            return true
        }
    })
    return proxy 
} 
const a = {
    "í˜•ê·œ" : "ì†”ë¡œ"
} 
const b = createReactiveObject(a, console.log)
b.í˜•ê·œ = "ì†”ë¡œ"
b.í˜•ê·œ = "ì»¤í”Œ"
// í˜•ê·œê°€ [ì†”ë¡œ] >> [ì»¤í”Œ] ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤
```
- _**set() í•¨ìˆ˜**_ë¥¼ í†µí•´ _**ì†ì„±ì— ëŒ€í•œ ì ‘ê·¼ì„ â€œê°€ë¡œì±„â€**_ì„œ _**í˜•ê·œë¼ëŠ” ì†ì„±ì´ ì†”ë¡œì—ì„œ ì»¤í”Œ**_ë¡œ ë˜ëŠ” ê²ƒì„ ê°ì‹œ
- ì¦‰ _**í˜•ê·œ(Subject)**_ì˜ _**ì†ì„± ê°’(ìƒíƒœ ë³€í™”)**_ì„ _**í”„ë¡ì‹œ ê°ì²´(Observer)**_ê°€ _**ê°ì‹œ**_í•˜ê³ (notify ëŒ€ì‹ ??) _**ìƒíƒœë³€í™”ì‹œ ì†ì„±ì„ updateí•˜ê³  "ë³€ê²½ë˜ì—ˆë‹¤ê³ " ì²˜ë¦¬**_í•¨! 
- **```get()```** : ì†ì„±ê³¼ í•¨ìˆ˜ì— ëŒ€í•œ ì ‘ê·¼ì„ ê°€ë¡œì±”
  **```has()```** : í•¨ìˆ˜ëŠ” in ì—°ì‚°ìì˜ ì‚¬ìš©ì„ ê°€ë¡œì±”
  **```set()```** : í•¨ìˆ˜ëŠ” ì†ì„±ì— ëŒ€í•œ ì ‘ê·¼ì„ ê°€ë¡œì±”


<br>

> **ğŸ¤”í”„ë¡ì‹œ(proxy) ê°ì²´?** 
- ì–´ë– í•œ ëŒ€ìƒì˜ _**ê¸°ë³¸ì ì¸ ë™ì‘(ì†ì„± ì ‘ê·¼, í• ë‹¹, ìˆœíšŒ, ì—´ê±°, í•¨ìˆ˜ í˜¸ì¶œ ë“±)ì˜ ì‘ì—…ì„ ê°€ë¡œì±Œ**_ ìˆ˜ ìˆëŠ” ê°ì²´
- ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ í”„ë¡ì‹œ ê°ì²´ëŠ” ë‘ ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ê°€ì§
â€¢ _**target**_: í”„ë¡ì‹œí•  ëŒ€ìƒ
â€¢ _**handler**_: _**target ë™ì‘ì„ ê°€ë¡œì±„ê³  ì–´ë– í•œ ë™ì‘ì„ í•  ê²ƒì¸ì§€ê°€ ì„¤ì •**_ì´ ì •í•´ì ¸ ìˆëŠ” í•¨ìˆ˜
- êµ¬í˜„ ì½”ë“œ 
```js
const handler = {
    get: function(target, name) { 
        return name === 'name' ? `${target.a} ${target.b}` : target[name]
    }
}
const p = new Proxy({a: 'KUNDOL', b: 'IS AUMUMU ZANGIN'}, handler)
console.log(p.name) // KUNDOL IS AUMUMU ZANGIN
```
: _**```new Proxy()```**_ë¡œ _**aì™€ b ì†ì„±ì„ ê°€ì§€ê³  ìˆëŠ” ê°ì²´**_ì™€ _**handler í•¨ìˆ˜**_ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë„£ê³  pë¼ëŠ” ë³€ìˆ˜ë¥¼ ì„ ì–¸
: _**pì˜ name ì†ì„±ì„ ì°¸ì¡°(ê¸°ë³¸ì ì¸ ë™ì‘)**_í•˜ë‹ˆ aì™€ bë¼ëŠ” ì†ì„±ë°–ì— ì—†ëŠ” ê°ì²´ê°€ _**handlerì˜ â€œnameì´ë¼ëŠ” ì†ì„±ì— ì ‘ê·¼í•  ë•Œ aì™€ bë¥¼ í•©ì³ì„œ ë¬¸ìì—´ì„ ë§Œë“¤ë¼â€**_ ëŠ” ë¡œì§ì— ë”°ë¼ ì–´ë– í•œ ë¬¸ìì—´ì„ ë§Œë“¦
: ì¦‰, _**ì–´ë– í•œ ì†ì„±(name)ì— ì ‘ê·¼**_í•  ë•Œ _**ê·¸ ë¶€ë¶„ì„ ê°€ë¡œì±„ì„œ ì–´ë– í•œ ë¡œì§(ë¬¸ìì—´ë¡œ ë§Œë“œëŠ” ê²ƒ)**_ì„ ê°•ì œí•  ìˆ˜ ìˆê²Œ í•¨! 



<br>

### Vue.js 3.0
- í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ë§ì´ ì“°ëŠ” í”„ë ˆì„ì›Œí¬ 
- í”„ë¡ì‹œ ê°ì²´ë¥¼ ì´ìš©í•œ ì˜µì €ë²„ íŒ¨í„´ : **```ref```**ë‚˜ **```reactive```**ë¡œ ì •ì˜í•˜ë©´ _**í•´ë‹¹ ê°’ì´ ë³€ê²½**_ë˜ì—ˆì„ ë•Œ _**ìë™ìœ¼ë¡œ DOMì— ìˆëŠ” ê°’ì´ ë³€ê²½**_ 
> **DOM(Document Object Model)**
ë¬¸ì„œ ê°ì²´ ëª¨ë¸ì„ ë§í•˜ë©°, _**ì›¹ ë¸Œë¼ìš°ì €ìƒì˜ í™”ë©´ì„ ì´ë£¨ê³  ìˆëŠ” ìš”ì†Œ**_ë“¤

<br>

```js
function createReactiveObject(
    target: Target,
    isReadonly: boolean,
    baseHandlers: ProxyHandler<any>,
    collectionHandlers: ProxyHandler<any>,
    proxyMap: WeakMap<Target, any>
) {
    if (!isObject(target)) {
        if (__DEV__) {
            console.warn(`value cannot be made reactive: ${String(target)}`)
        }
        return target
    }
      
    // target is already a Proxy, return it. targetì´ ì´ë¯¸ Proxyë©´ ë°”ë¡œ return
    // exception: calling readonly() on a reactive object
    if (
        target[ReactiveFlags.RAW] &&
        !(isReadonly && target[ReactiveFlags.IS_REACTIVE])
    ) {
        return target
    }
      
    // target already has corresponding Proxy, targetì´ ì´ë¯¸ Proxyì— ëŒ€ì‘í•˜ë©´
    const existingProxy = proxyMap.get(target) // Proxy ê°ì²´ ì–»ê¸°
    if (existingProxy) {
        return existingProxy // Proxy ê°ì²´ ë¦¬í„´
    }
      
    // only a whitelist of value types can be observed, ê°’ ìœ í˜•ë§Œ ê°ì‹œ ê°€ëŠ¥! 
    const targetType = getTargetType(target) // targetì˜ type ê°’ ì–»ê³ 
    if (targetType === TargetType.INVALID) { // ìœ íš¨í•˜ì§€ ì•Šìœ¼ë©´ ê·¸ëƒ¥ return 
        return target
    }
    const proxy = new Proxy(
        target,
        targetType === TargetType.COLLECTION ? collectionHandlers : baseHandlers
    ) // Proxy ê°ì²´ ìƒì„±(Observer)
    proxyMap.set(target, proxy) // target(Subject)ê³¼ Proxy(Observer) ì—°ê²°! 
    return proxy
}
```
- _**proxyMapì´ë¼ëŠ” í”„ë¡ì‹œ ê°ì²´**_ë¥¼ ì‚¬ìš©í–ˆê³ , _**ê°ì²´ ë‚´ë¶€ì˜ get(), set() ë©”ì„œë“œë¥¼ ì‚¬ìš©**_

<br>
<br>

## ğŸ˜ ì°¸ê³ ìë£Œ
[ë©´ì ‘ì„ ìœ„í•œ CS ì „ê³µì§€ì‹ ë…¸íŠ¸](https://thebook.io/080326/)
Java ì–¸ì–´ë¡œ ë°°ìš°ëŠ” ë””ìì¸ íŒ¨í„´ ì…ë¬¸
[GOF Design Pattern](https://stackoverflow.com/questions/1673841/examples-of-gof-design-patterns-in-javas-core-libraries/2707195#2707195)
[Observer pattern](https://en.wikipedia.org/wiki/Observer_pattern)
[ì˜µì„œë²„ íŒ¨í„´-ìœ„í‚¤ë°±ê³¼](https://ko.wikipedia.org/wiki/%EC%98%B5%EC%84%9C%EB%B2%84_%ED%8C%A8%ED%84%B4)
[[Design Pattern] GoF í–‰ìœ„ íŒ¨í„´ - ì˜µì„œë²„ íŒ¨í„´(Observer Pattern)](https://4z7l.github.io/2021/01/27/design_pattern_observer.html)
[[ë””ìì¸íŒ¨í„´] ì˜µì €ë²„ íŒ¨í„´ (Observer Pattern)](https://pjh3749.tistory.com/266)
[ì˜µì €ë²„ íŒ¨í„´ - ê¸°ê³„ì¸ê°„](https://johngrib.github.io/wiki/pattern/observer/)
