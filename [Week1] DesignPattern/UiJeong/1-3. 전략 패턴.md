[](https://velog.io/@juijeong8324/Design-Pattern-4)

> ğŸ’» **[ì „ëµ íŒ¨í„´ êµ¬í˜„ ì½”ë“œ](https://github.com/juijeong8324/design-pattern-study/tree/main/02_observer_pattern/UiJeong)** 

<br>

## ì „ëµ íŒ¨í„´ 
- _**ì •ì±… íŒ¨í„´(policy pattern)**_ì´ë¼ê³ ë„ í•˜ë©°, _**ê°ì²´ì˜ í–‰ìœ„ë¥¼ ë°”ê¾¸ê³  ì‹¶ì€ ê²½ìš°**_ ì „ëµì´ë¼ê³  ë¶€ë¥´ëŠ” â€˜_**ìº¡ìŠí™”í•œ ì•Œê³ ë¦¬ì¦˜**_â€™ì„ _**ì»¨í…ìŠ¤íŠ¸**_ ì•ˆì—ì„œ ë°”ê¿”ì£¼ë©´ì„œ _**ìƒí˜¸ êµì²´**_ê°€ ê°€ëŠ¥í•˜ê²Œ ë§Œë“œëŠ” íŒ¨í„´
- ê°ì²´ë“¤ì´ í•  ìˆ˜ ìˆëŠ” í–‰ìœ„ ê°ê°ì— ëŒ€í•´ _**ì „ëµ í´ë˜ìŠ¤ë¥¼ ìƒì„±**_í•˜ê³ , ìœ ì‚¬í•œ _**í–‰ìœ„ë“¤ì„ ìº¡ìŠí™” í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì •ì˜**_í•˜ì—¬, _**ê°ì²´ì˜ í–‰ìœ„ë¥¼ ë™ì ìœ¼ë¡œ ë°”ê¾¸ê³  ì‹¶ì€ ê²½ìš°**_ ì§ì ‘ í–‰ìœ„ë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³  _**ì „ëµì„ ë°”ê¿”ì£¼ê¸°ë§Œ í•¨**_ìœ¼ë¡œì¨ í–‰ìœ„ë¥¼ ìœ ì—°í•˜ê²Œ í™•ì¥
â†’ ê³µí†µëœ ì¸í„°í˜ì´ìŠ¤ Aë¥¼ ê°–ëŠ” ê°ì²´ë“¤(E, F, G)ì„ B í´ë˜ìŠ¤ì—ì„œ ì‚¬ìš©í• ë•Œ, ì¸í„°í˜ì´ìŠ¤ Aë§Œì„ ì´ìš©í•˜ì—¬ ë“¤ì–´ì˜¤ëŠ” ê°ì²´ ì¢…ë¥˜(E, F, G)ì— ë”°ë¼ ë™ì‘
- GoFì˜ ë””ìì¸ íŒ¨í„´ ì¤‘ _**í–‰ìœ„ íŒ¨í„´**_ì— í•´ë‹¹

> **ğŸ¤”ì–¸ì œ ì‚¬ìš©í•˜ë‚˜ìš”?** 
1. _**ê°™ì€ ê¸°ëŠ¥**_ì´ì§€ë§Œ _**ì„œë¡œ ë‹¤ë¥¸ ì „ëµì„ ê°€ì§„ í´ë˜ìŠ¤**_ë“¤ì„ _**ìƒí˜¸êµí™˜**_í•˜ê³  ì‹¶ì„ ë•Œ 
2. _**ì‹¤í–‰ ì¤‘**_ì— ë™ì ìœ¼ë¡œ _**í´ë˜ìŠ¤ì˜ ë™ì‘ í˜¹ì€ ì•Œê³ ë¦¬ì¦˜ì„ ì„ íƒ**_í•˜ê³  ì‹¶ì„ ë•Œ  

<br>

### êµ¬ì¡°
![](https://velog.velcdn.com/images/juijeong8324/post/77e74560-5dec-4103-bed4-0059f97f3493/image.png)

- **Context** : Strategyë¥¼ ì´ìš©í•˜ëŠ” ì—­í• , Strategy1ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©° ì´ìš©í•œë‹¤.(Strategyì˜ ì¸í„°í˜ì´ìŠ¤(API)ë¥¼ í˜¸ì¶œí•œë‹¤.)
- **Strategy** : ì „ëµì„ ì´ìš©í•˜ê¸° ìœ„í•œ ì¸í„°í˜ì´ìŠ¤(API)ë¥¼ ê²°ì • 
- **Strategy1** : Startegyì˜ ì¸í„°í˜ì´ìŠ¤(API)ë¥¼ ì‹¤ì œë¡œ êµ¬í˜„, êµ¬ì²´ì ì¸ ì „ëµ(ì‘ì „, ë°©ì±…, ë°©ë²•, ì•Œê³ ë¦¬ì¦˜)ì„ ì‹¤ì œë¡œ í”„ë¡œê·¸ë˜ë°í•œë‹¤.

<br>
<br>

### ì¥ì  
- **ìœ ì§€ë³´ìˆ˜ í•˜ê¸° ì¢‹ë‹¤** : ì•Œê³ ë¦¬ì¦˜ì„ ìˆ˜ì •í•˜ê³  ì‹¶ì„ ë•Œ Strategy ì¸í„°í˜ì´ìŠ¤ëŠ” ë³€ê²½í•˜ì§€ ì•Šê³  Strategy1ì˜ êµ¬í˜„ë§Œ ìˆ˜ì •í•˜ë©´ ëœë‹¤. 
- **ëŠìŠ¨í•œ ì—°ê²°** : ìœ„ì„ì´ë¼ëŠ” ëŠìŠ¨í•œ ì—°ê²°ì„ ì‚¬ìš©í•˜ê³  ìˆìœ¼ë¯€ë¡œ ì•Œê³ ë¦¬ì¦˜ì„ ìš©ì´í•˜ê²Œ êµí™˜í•  ìˆ˜ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì¥ê¸° ê²Œì„ì„ í•˜ëŠ” í”„ë¡œê·¸ë¨ì—ì„œ ì‚¬ìš©ìì˜ ì„ íƒì— ë§ì¶”ì–´ ì‚¬ê³  ë£¨í‹´ì˜ ë ˆë²¨ì„ ê°„ë‹¨í•˜ê²Œ êµì²´í•  ìˆ˜ ìˆë”°.
- **í”„ë¡œê·¸ë¨ì˜ ë™ì‘ ì¤‘ì— í´ë˜ìŠ¤ë¥¼ êµì²´í•  ìˆ˜ ìˆìŒ** : ì˜ˆë¥¼ ë“¤ì–´ ë©”ëª¨ë¦¬ê°€ ì ì€ í™˜ê²½ì—ì„œ SlowbutLessMemoryStrategy(ì†ë„ëŠ” ëŠë¦¬ì§€ë§Œ ë©”ëª¨ë¦¬ë¥¼ ì ˆì•½)ë¥¼ ì‚¬ìš©í•˜ê³  ë©”ëª¨ë¦¬ê°€ ë§ì€ í™˜ê²½ì—ì„œ FastButMoreStrategy(ì†ë„ëŠ” ë¹ ë¥´ì§€ë§Œ ë©”ëª¨ë¦¬ë¥¼ ë§ì´ ì‚¬ìš©)ë¥¼ ì‚¬ìš©. 

<br>
<br>

## êµ¬í˜„
![](https://velog.velcdn.com/images/juijeong8324/post/ae39b8ba-022e-4227-bdf4-f13397b0e141/image.png)
- **Strategy**(ì „ëµ ì¸í„°í˜ì´ìŠ¤)
âŒ OperationAdd (êµ¬ì²´ì ì¸ ì „ëµ)
âŒ OperationSubstract (êµ¬ì²´ì ì¸ ì „ëµ)
âŒ OperationMultiply (êµ¬ì²´ì ì¸ ì „ëµ) 
- **Context** (ì „ëµì„ ì‚¬ìš©í•˜ëŠ” í´ë˜ìŠ¤)
- **StrategyPatternDemo** (ê± Main í´ë˜ìŠ¤) 

```java
 /* Strategy ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì„± */
public interface Strategy {
   public int doOperation(int num1, int num2);
}
```

```java
/* êµ¬ì²´ì ì¸ ì „ëµ êµ¬í˜„ */
public class OperationAdd implements Strategy{
   @Override
   public int doOperation(int num1, int num2) {
      return num1 + num2;
   }
}

public class OperationSubstract implements Strategy{
   @Override
   public int doOperation(int num1, int num2) {
      return num1 - num2;
   }
}

public class OperationMultiply implements Strategy{
   @Override
   public int doOperation(int num1, int num2) {
      return num1 * num2;
   }
}
```

```java
public class Context {
   private Strategy strategy;

   public Context(Strategy strategy){
      this.strategy = strategy;
   }

   public int executeStrategy(int num1, int num2){ // ê¸°ëŠ¥ì´ ë™ì¼í•˜ì§€ë§Œ ê°ê¸° ë‹¤ë¥¸ ì „ëµì„ ì‚¬ìš©
      return strategy.doOperation(num1, num2);
   }
}
```

```java
public class StrategyPatternDemo {
   public static void main(String[] args) {
      Context context = new Context(new OperationAdd());		
      System.out.println("10 + 5 = " + context.executeStrategy(10, 5)); // ì „ëµ 1 ì‚¬ìš© 

      context = new Context(new OperationSubstract());		
      System.out.println("10 - 5 = " + context.executeStrategy(10, 5)); // ì „ëµ 2 ì‚¬ìš©

      context = new Context(new OperationMultiply());		
      System.out.println("10 * 5 = " + context.executeStrategy(10, 5)); // ì „ëµ 3 ì‚¬ìš©
   }
}

// 10 + 5 = 15
// 10 - 5 = 5
// 10 * 5 = 50
```

<br>
<br>

## [EXAMPLE](https://github.com/wnghdcjfe/csnote)
### Java
```java
import java.text.DecimalFormat;
import java.util.ArrayList;
import java.util.List;

/* Strategy ì¸í„°í˜ì´ìŠ¤ */
interface PaymentStrategy { 
    public void pay(int amount);
} 

/* ì „ëµ1 í´ë˜ìŠ¤ */
class KAKAOCardStrategy implements PaymentStrategy {
    private String name;
    private String cardNumber;
    private String cvv;
    private String dateOfExpiry;
    
    public KAKAOCardStrategy(String nm, String ccNum, String cvv, String expiryDate){
        this.name=nm;
        this.cardNumber=ccNum;
        this.cvv=cvv;
        this.dateOfExpiry=expiryDate;
    }

    @Override
    public void pay(int amount) {
        System.out.println(amount +" paid using KAKAOCard.");
    }
} 

/* ì „ëµ2 í´ë˜ìŠ¤ */
class LUNACardStrategy implements PaymentStrategy {
    private String emailId;
    private String password;
    
    public LUNACardStrategy(String email, String pwd){
        this.emailId=email;
        this.password=pwd;
    }
    
    @Override
    public void pay(int amount) {
        System.out.println(amount + " paid using LUNACard.");
    }
} 

/* item í´ë˜ìŠ¤ */
class Item { 
    private String name;
    private int price; 
    public Item(String name, int cost){
        this.name=name;
        this.price=cost;
    }

    public String getName() {
        return name;
    }

    public int getPrice() {
        return price;
    }
} 

/* Context í´ë˜ìŠ¤ */
class ShoppingCart { 
    List<Item> items;
    
    public ShoppingCart(){
        this.items=new ArrayList<Item>();
    }
    
    public void addItem(Item item){
        this.items.add(item);
    }
    
    public void removeItem(Item item){
        this.items.remove(item);
    }
    
    public int calculateTotal(){
        int sum = 0;
        for(Item item : items){
            sum += item.getPrice();
        }
        return sum;
    }
    
    public void pay(PaymentStrategy paymentMethod){
        int amount = calculateTotal();
        paymentMethod.pay(amount);
    }
}  

/* Main */
public class HelloWorld{
    public static void main(String []args){
        ShoppingCart cart = new ShoppingCart();
        
        Item A = new Item("kundolA",100);
        Item B = new Item("kundolB",300);
        
        cart.addItem(A);
        cart.addItem(B);
        
        // pay by LUNACard
        cart.pay(new LUNACardStrategy("kundol@example.com", "pukubababo"));
        // pay by KAKAOBank
        cart.pay(new KAKAOCardStrategy("Ju hongchul", "123456789", "123", "12/01"));
    }
}
/*
400 paid using LUNACard.
400 paid using KAKAOCard.
*/
```
- _**ì‡¼í•‘ ì¹´íŠ¸**_ì— _**ì•„ì´í…œ**_ì„ ë‹´ì•„ _**LUNACard ë˜ëŠ” KAKAOCardë¼ëŠ” ë‘ ê°œì˜ ì „ëµ**_ìœ¼ë¡œ ê²°ì œí•˜ëŠ” ì½”ë“œ
- ì–´ë–¤ ê²ƒì„ ì‚´ ë•Œ ë„¤ì´ë²„í˜ì´, ì¹´ì¹´ì˜¤í˜ì´ ë“± ë‹¤ì–‘í•œ ë°©ë²•ìœ¼ë¡œ ê²°ì œí•˜ë“¯, ì–´ë–¤ ì•„ì´í…œì„ ì‚´ ë•Œ LUNACardë¡œ ì‚¬ëŠ” ê²ƒê³¼ KAKAOCardë¡œ ì‚¬ëŠ” ê²ƒì„ êµ¬í˜„í•œ ì˜ˆì œ
- _**ê²°ì œ ë°©ì‹ì˜ â€˜ì „ëµâ€™ë§Œ ë°”ê¿”ì„œ ë‘ ê°€ì§€ ë°©ì‹ìœ¼ë¡œ ê²°ì œ**_í•˜ëŠ” ê²ƒì„ êµ¬í˜„

<br>

### Passportì˜ ì „ëµ íŒ¨í„´
> **ğŸ¤” passportë€?**
![](https://velog.velcdn.com/images/juijeong8324/post/e3c5abb5-cddb-4d6b-9d33-ffd5b525fafb/image.png) 
- _**Node.js**_ì—ì„œ _**ì¸ì¦ ëª¨ë“ˆ**_ì„ êµ¬í˜„í•  ë•Œ ì“°ëŠ” _**ë¯¸ë“¤ì›¨ì–´ ë¼ì´ë¸ŒëŸ¬ë¦¬**_
- _**ì—¬ëŸ¬ ê°€ì§€ â€˜ì „ëµâ€™ì„ ê¸°ë°˜ìœ¼ë¡œ ì¸ì¦**_í•  ìˆ˜ ìˆê²Œí•¨
- ì„œë¹„ìŠ¤ ë‚´ì˜ íšŒì›ê°€ì…ëœ _**ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ê¸°ë°˜**_ìœ¼ë¡œ ì¸ì¦í•˜ëŠ” _**LocalStrategy ì „ëµ**_ê³¼ í˜ì´ìŠ¤ë¶, ë„¤ì´ë²„ ë“± _**ë‹¤ë¥¸ ì„œë¹„ìŠ¤ë¥¼ ê¸°ë°˜**_ìœ¼ë¡œ ì¸ì¦í•˜ëŠ” _**OAuth ì „ëµ**_ ë“±ì„ ì§€ì›

```js
// passportì™€ passport-local ëª¨ë“ˆì„ ê°€ì ¸ì˜¤ê¸° 
var passport = require('passport')
    , LocalStrategy = require('passport-local').Strategy;

passport.use(new LocalStrategy(
    function(username, password, done) // ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ìŒ 
  	{
        User.findOne({ username: username }, function (err, user) {
          if (err) { return done(err); }
            if (!user) {
                return done(null, false, { message: 'Incorrect username.' });
            }
            if (!user.validPassword(password)) {
                return done(null, false, { message: 'Incorrect password.' });
            }
            return done(null, user);
        });
    }
));
```
- ```passport.use(new LocalStrategy( ...```ì²˜ëŸ¼ _**```passport.use()```**_ë¼ëŠ” ë©”ì„œë“œì— _**â€˜ì „ëµâ€™ì„ ë§¤ê°œë³€ìˆ˜**_ë¡œ ë„£ì–´ì„œ ë¡œì§ì„ ìˆ˜í–‰

<br>
<br>

## ğŸ˜ ì°¸ê³ ìë£Œ
[ë©´ì ‘ì„ ìœ„í•œ CS ì „ê³µì§€ì‹ ë…¸íŠ¸](https://thebook.io/080326/)
Java ì–¸ì–´ë¡œ ë°°ìš°ëŠ” ë””ìì¸ íŒ¨í„´ ì…ë¬¸
[GOF Design Pattern](https://stackoverflow.com/questions/1673841/examples-of-gof-design-patterns-in-javas-core-libraries/2707195#2707195)
[Strategy pattern](https://en.wikipedia.org/wiki/Strategy_pattern)
[Design Patterns - Strategy Pattern](https://www.tutorialspoint.com/design_pattern/strategy_pattern.htm)
[ë””ìì¸íŒ¨í„´ ì´í•´í•˜ê¸°](https://bearhunter49.tistory.com/16)
[[ë””ìì¸íŒ¨í„´] ì „ëµ íŒ¨í„´ ( Strategy Pattern )](https://victorydntmd.tistory.com/292)
[ì „ëµíŒ¨í„´](https://jackjeong.tistory.com/108)

