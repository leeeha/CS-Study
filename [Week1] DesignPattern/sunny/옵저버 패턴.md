# ì˜µì €ë²„ íŒ¨í„´, Observer Pattern

---

## ì˜µì €ë²„ íŒ¨í„´ì´ë€? - ğŸ‘“ê°ì‹œì íŒ¨í„´

> ì£¼ì²´ê°€ ì–´ë–¤ ê°ì²´(subject)ì˜ ìƒíƒœ ë³€í™”ë¥¼ ê´€ì°°í•˜ë‹¤ê°€ ìƒíƒœ ë³€í™”ê°€ ìˆì„ ë•Œë§ˆë‹¤ ë©”ì„œë“œ ë“±ì„ í†µí•´ ì˜µì €ë²„ ëª©ë¡ì— ìˆëŠ” ì˜µì €ë²„ë“¤ì—ê²Œ ë³€í™”ë¥¼ ì•Œë ¤ì£¼ëŠ” ë””ìì¸ íŒ¨í„´

- ì—¬ê¸°ì„œ `ì£¼ì²´`ë€ ê°ì²´ì˜ ìƒíƒœ ë³€í™”ë¥¼ ë³´ê³  ìˆëŠ” ê´€ì°°ìì´ë©°, `ì˜µì €ë²„` ë“¤ì´ë€ ì´ ê°ì²´ì˜ ìƒíƒœ ë³€í™”ì— ë”°ë¼ ì „ë‹¬ë˜ëŠ” ë©”ì„œë“œ ë“±ì„ ê¸°ë°˜ìœ¼ë¡œ ì¶”ê°€ ë³€í™” ì‚¬í•­ì´ ìƒê¸°ëŠ” ê°ì²´ë“¤ì„ ì˜ë¯¸í•œë‹¤.
- ë˜í•œ ì£¼ì²´ì™€ ê°ì²´ë¥¼ ë”°ë¡œ ë‘ì§€ ì•Šê³  ìƒíƒœê°€ ë³€ê²½ë˜ëŠ” ê°ì²´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬ì¶•í•˜ê¸°ë„ í•œë‹¤.
- ì–´ë– í•œ ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆì„ ë•Œ, ì˜µì €ë²„ê°€ ë°”ë¡œ ë°˜ì‘í•˜ëŠ” íŒ¨í„´
- ì£¼ë¡œ **ì´ë²¤íŠ¸ ê¸°ë°˜ ì‹œìŠ¤í…œ**ì— ì‚¬ìš©
- MVC íŒ¨í„´ì—ë„ ì‚¬ìš©

![https://user-images.githubusercontent.com/88873302/222954846-23ae5fdd-ce13-4455-b8fa-380bbc83c8f1.jpg](https://user-images.githubusercontent.com/88873302/222954846-23ae5fdd-ce13-4455-b8fa-380bbc83c8f1.jpg)

![https://user-images.githubusercontent.com/88873302/222954384-ee4a5a8a-9750-4712-b71f-74e0f2f9e7ef.png](https://user-images.githubusercontent.com/88873302/222954384-ee4a5a8a-9750-4712-b71f-74e0f2f9e7ef.png)

## ì˜µì €ë²„ íŒ¨í„´ ì˜ˆì‹œ - íŠ¸ìœ„í„°

![https://user-images.githubusercontent.com/88873302/222954128-b1dc496e-dc0d-4df3-84a9-003a10ef50d8.png](https://user-images.githubusercontent.com/88873302/222954128-b1dc496e-dc0d-4df3-84a9-003a10ef50d8.png)

ë‚´ê°€ ì–´ë–¤ ì‚¬ëŒì¸ ì£¼ì²´(subject)ë¥¼ íŒ”ë¡œìš°í–ˆë‹¤ë©´ ì£¼ì²´ê°€ ìƒˆë¡œìš´ íŠ¸ìœ—ì„ ì˜¬ë¦¬ê²Œ ë˜ë©´ ì•Œë¦¼ì´ íŒ”ë¡œì›Œ(observer)ì—ê²Œ ê°„ë‹¤.

## ì˜µì €ë²„ íŒ¨í„´ì˜ ì¥ë‹¨ì 

### ì¥ì 

- ì‹¤ì‹œê°„ìœ¼ë¡œ í•œ ê°ì²´ì˜ ë³€ê²½ì‚¬í•­ì„ ë‹¤ë¥¸ ê°ì²´ì— ì „íŒŒ
- **ëŠìŠ¨í•œ ê²°í•©**ìœ¼ë¡œ ì‹œìŠ¤í…œì´ ìœ ì—°í•˜ê³  ê°ì²´ê°„ì˜ ì˜ì¡´ì„±ì„ ì œê±°í•  ìˆ˜ ìˆë‹¤

### ë‹¨ì 

- ë„ˆë¬´ ë§ì´ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ìƒíƒœ ê´€ë¦¬ê°€ í˜ë“¤ ìˆ˜ ìˆë‹¤

## ì˜ˆì œ ì½”ë“œ

```java
import java.util.ArrayList;
import java.util.List;

// ì£¼ì²´ - ê°ì²´ì˜ ìƒíƒœ ë³€í™”ë¥¼ ë³´ê³  ìˆëŠ” ê´€ì°°ì
interface Subject {
    public void register(Observer obj);
    public void unregister(Observer obj);
    public void notifyObservers();
    public Object getUpdate(Observer obj);
}

// ì˜µì €ë²„
interface Observer {
    public void update();
}

class Topic implements Subject {
    private List<Observer> observers;
    private String message;

    public Topic() {
        this.observers = new ArrayList<>();
        this.message = "";
    }

    @Override
    public void register(Observer obj) {
        if (!observers.contains(obj)) observers.add(obj);
    }

    @Override
    public void unregister(Observer obj) {
        observers.remove(obj);
    }

    @Override
    public void notifyObservers() { //
        this.observers.forEach(Observer::update);
    }

    @Override
    public Object getUpdate(Observer obj) {
        return this.message;
    }

    public void postMessage(String msg) {
        System.out.println("Message sended to Topic: " + msg);
        this.message = msg;
        notifyObservers(); // 
    }
}

class TopicSubscriber implements Observer {
    private String name;
    private Subject topic;

    public TopicSubscriber(String name, Subject topic) {
        this.name = name;
        this.topic = topic;
    }

    @Override
    public void update() {
        String msg = (String) topic.getUpdate(this);
        System.out.println(name + ":: got message >> " + msg);
    }
}

public class Demo {
    public static void main(String[] args) {
        Topic topic = new Topic();
        Observer a = new TopicSubscriber("a", topic);
        Observer b = new TopicSubscriber("b", topic);
        Observer c = new TopicSubscriber("c", topic);
        topic.register(a);
        topic.register(b);
        topic.register(c);

        topic.postMessage("amumu is op champion!");
    }
}

/*
Message sended to Topic: amumu is op champion!
a:: got message >> amumu is op champion!
b:: got message >> amumu is op champion!
c:: got message >> amumu is op champion!
*/
```

ğŸ’¡ ì—¬ê¸°ì„œ `topic` ì€ ì£¼ì²´ì´ì ê°ì²´ê°€ ëœë‹¤. 

ğŸ’¡ `Observer a = new TopicSubscriber("a", topic);` â†’ ì˜µì €ë²„ ì„ ì–¸, ì´ë¦„ê³¼ ì–´ë– í•œ topicì˜ ì˜µì €ë²„ê°€ ë  ê²ƒì¸ì§€

ğŸ’¡ `topic.postMessage("amumu is op champion!");` postí•˜ì ì˜µì €ë²„ë“¤ (a, b, c)ì—ê²Œ ì•Œë¦¼ì´ ê°„ë‹¤.

---

### ì°¸ê³  ìë£Œ

- ë©´ì ‘ì„ ìœ„í•œ CS ì „ê³µì§€ì‹ ë…¸íŠ¸